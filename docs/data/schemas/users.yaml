version: 1
entity: users
description: Canonical user record for application identity and profile
owner: data-platform
pii_classification: contains_pii
fields:
  - name: user_id
    type: string
    nullable: false
    constraints:
      - unique
  - name: email
    type: string
    nullable: false
    constraints:
      - unique
      - { format: email }
  - name: full_name
    type: string
    nullable: true
  - name: phone_number
    type: string
    nullable: true
    constraints:
      - { format: e164 }
  - name: country_code
    type: string
    nullable: true
    constraints:
      - { regex: '^[A-Z]{2}$' }
  - name: created_at
    type: string
    nullable: false
  - name: updated_at
    type: string
    nullable: false
primary_key:
  - user_id
partitioning: none
retention:
  type: delete
  period: P7Y
data_quality:
  freshness_sla: PT24H
  thresholds:
    row_count_change_pct:
      warn: 50
      fail: 90
    null_ratio:
      email:
        warn: 0
        fail: 0
      user_id:
        warn: 0
        fail: 0
security:
  encryption: at_rest_and_in_transit
  access_tiers:
    - role: analyst
      access: masked
    - role: data_scientist
      access: masked
    - role: admin
      access: full
privacy:
  policies:
    - name: gdpr_right_to_erasure
      action: delete
      window: P30D
lineage:
  sources:
    - app.db.users
  targets:
    - warehouse.dim_users

